---
phase: 08-ai-prompt-refinement
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/globals.css
  - src/app/(wiki)/wiki/[articleSlug]/page.tsx
autonomous: true
gap_closure: false

must_haves:
  truths:
    - "Prose H1 is visually smaller than the article title (text-3xl font-bold) — clear hierarchy: article title > H1 > H2"
    - "Prose H2 is visually smaller than prose H1"
    - "The article title on the article page uses text-3xl font-bold and is clearly the largest heading"
    - "H1 in article content (.prose h1) is sized around 1.75em (down from 2.25em) to sit below the article title"
    - "H2 in article content (.prose h2) is sized around 1.35em (down from 1.5em)"
    - "BlockNote editor heading sizes are also reduced to match the new prose sizes"
    - "The first heading inside article content does not visually compete with the article title"
  artifacts:
    - path: "src/app/globals.css"
      provides: "Reduced prose H1/H2 sizes and matching BlockNote editor heading sizes"
  key_links:
    - from: "src/app/globals.css"
      to: "src/app/(wiki)/wiki/[articleSlug]/page.tsx"
      via: "prose class applies heading sizes to article content"
      pattern: "prose"
---

<objective>
Reduce the CSS size of H1 and H2 headings in article content so that H1 section headings are clearly subordinate to the article title. Currently, prose H1 (2.25em) is visually larger than or equal to the article title (text-3xl = ~1.875rem), creating a confusing hierarchy.

Purpose: Establish a clear visual hierarchy — article title is the biggest, followed by H1 section headings, then H2 sub-headings. When the AI starts using H1s as top-level section headings (per 08-01 prompt changes), they should be obviously smaller than the page title.
Output: Updated CSS in globals.css for prose and BlockNote heading sizes.
</objective>

<execution_context>
@/Users/michael/.claude/get-shit-done/workflows/execute-plan.md
@/Users/michael/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/app/globals.css
@src/app/(wiki)/wiki/[articleSlug]/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Reduce prose and BlockNote heading sizes for clear hierarchy</name>
  <files>src/app/globals.css</files>
  <action>
**Current sizes (too large):**
- Prose H1: `2.25em` (from Tailwind Typography defaults)
- Prose H2: `1.5em`
- Prose H3: `1.25em`
- Article title: `text-3xl font-bold` = 1.875rem

**Problem:** H1 at 2.25em is larger than the article title at 1.875rem.

**New sizes (subordinate to article title):**
- Prose H1: `1.5em` (~24px at 16px base — clearly smaller than text-3xl's 30px)
- Prose H2: `1.25em` (~20px)
- Prose H3: `1.1em` (~17.6px)

**1. Update the prose heading comment and add size overrides in globals.css:**

After the existing `/* Prose heading overrides: tighter spacing than typography defaults */` section, add explicit font-size overrides:

```css
/* Prose heading sizes: subordinate to article title (text-3xl = 1.875rem).
   H1 sections sit clearly below the page title in visual hierarchy. */
.prose h1 {
  font-size: 1.5em;
}
.prose h2 {
  font-size: 1.25em;
}
.prose h3 {
  font-size: 1.1em;
}
```

**2. Update BlockNote editor heading sizes to match:**

Change the existing BlockNote heading size overrides:

```css
/* Heading sizes: match prose (h1 1.5em, h2 1.25em, h3 1.1em).
   BlockNote defaults are much larger (h1 3em, h2 2em, h3 1.3em). */
.bn-editor [data-content-type="heading"] {
  --level: 1.5em;
}
.bn-editor [data-content-type="heading"][data-level="2"] {
  --level: 1.25em;
}
.bn-editor [data-content-type="heading"][data-level="3"] {
  --level: 1.1em;
}
```

**3. Update BlockNote side menu heights to match new sizes:**

The side menu heights need to match the new smaller heading sizes. Calculation: font-size * 1.75 line-height + 6px padding.

```css
/* Side menu heights matching new heading sizes:
   H1: 1.5em * 16px * 1.75 + 6 ≈ 48px
   H2: 1.25em * 16px * 1.75 + 6 ≈ 41px
   H3: 1.1em * 16px * 1.75 + 6 ≈ 37px */
.bn-container .bn-side-menu[data-block-type="heading"][data-level="1"] {
  height: 48px;
}
.bn-container .bn-side-menu[data-block-type="heading"][data-level="2"] {
  height: 41px;
}
.bn-container .bn-side-menu[data-block-type="heading"][data-level="3"] {
  height: 37px;
}
```
  </action>
  <verify>
Run `npm run build` to verify CSS compiles. Read globals.css to confirm:
1. Prose H1 is 1.5em, H2 is 1.25em, H3 is 1.1em
2. BlockNote heading sizes match prose sizes
3. Side menu heights are updated
4. Article title (text-3xl = 1.875rem) is clearly larger than H1 (1.5em ≈ 1.5rem)
  </verify>
  <done>
Prose H1 reduced to 1.5em (from 2.25em), H2 to 1.25em (from 1.5em), H3 to 1.1em (from 1.25em). Article title (text-3xl = 1.875rem) is now clearly the largest heading on the page. BlockNote editor heading sizes match. Side menu heights updated.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` succeeds
2. Prose H1 = 1.5em, visually smaller than article title (text-3xl = 1.875rem)
3. Prose H2 = 1.25em, visually smaller than H1
4. Prose H3 = 1.1em, visually smaller than H2
5. BlockNote editor heading sizes match prose sizes
6. Side menu heights are updated for new heading sizes
7. Clear visual hierarchy: article title > H1 > H2 > H3
</verification>

<success_criteria>
Article content headings are visually subordinate to the article title. H1 section headings within content are clearly smaller than the page title, establishing an unambiguous hierarchy. Editor and reader views match.
</success_criteria>

<output>
After completion, create `.planning/phases/08-ai-prompt-refinement/08-02-SUMMARY.md`
</output>
